# Puzzle & Form

A 3D photogrammetry puzzle game. Players reassemble 3D-scanned models. Completing a level unlocks the model in a free 3D city builder.

---

## Setup — 3 steps, ~5 minutes, no coding

### Step 1 — Fork & enable GitHub Pages

1. Click **Fork** (top right of this repo)
2. Go to your fork → **Settings → Pages**
3. Source: **Deploy from a branch** → branch: `main` → folder: `/ (root)`
4. Click Save → your site is live at `https://YOUR-USERNAME.github.io/REPO-NAME`

### Step 2 — Create a GitHub Personal Access Token

1. Go to **github.com → Settings → Developer settings → Personal access tokens → Tokens (classic)**
2. Click **Generate new token (classic)**
3. Name it anything (e.g. "puzzle admin")
4. Tick the **`repo`** scope (full repo access)
5. Click Generate → **copy the token now** (you won't see it again)

### Step 3 — Open the admin page and upload your levels

Open: `https://YOUR-USERNAME.github.io/REPO-NAME/admin.html`

Fill in:
- **GitHub Username** — your GitHub username
- **GitHub Personal Access Token** — the token from step 2
- **Repository** — `YOUR-USERNAME/REPO-NAME`
- **Admin Password** — `admin` (you can change this in `admin.html` line 1, the `ADMIN_PASSWORD` constant)

Then:
1. Click **+ Add Level**
2. Set the level name and number of pieces
3. Upload your `.glb` model file (drag & drop works)
4. Use the **Rotation sliders** in the Calibration section to fix the model's orientation — spin it until it looks right standing upright
5. Optionally upload a 360° panorama for the background (equirectangular JPG, ideally 4096×2048)
6. Click **Publish** — this commits `levels.json` to your repo
7. Wait ~30 seconds for GitHub Pages to rebuild
8. Share the main URL with players

---

## Files

| File | Purpose |
|------|---------|
| `index.html` | The puzzle game (players go here) |
| `admin.html` | Your private admin panel |
| `build.html` | 3D city builder (unlocked after completing puzzles) |
| `levels.json` | Auto-generated by admin — contains all level data |

---

## Changing the admin password

Open `admin.html`, find line near the top of the `<script>` section:

```js
const ADMIN_PASSWORD = 'admin';
```

Change `'admin'` to anything you want, then commit the file.

---

## Supported model formats

- `.glb` — recommended, preserves textures
- `.obj` — geometry only, no textures

## Supported panorama formats

Any image file (JPG, PNG, WebP). Should be equirectangular (2:1 aspect ratio). 4096×2048 is ideal.

---

## Player controls

| | |
|---|---|
| Left drag piece | Move horizontally |
| Green arrows (↑↓) | Move piece up / down |
| Right drag | Orbit camera |
| Scroll | Zoom |

---

## Notes

- `levels.json` is committed directly to your repo by the admin page — no server needed
- Models and panoramas are stored as base64 inside `levels.json`
- Large models (>15MB) may slow page load — compress before uploading
- The admin page uses GitHub's API and your personal token — it only sends data to GitHub, nothing else
- Your token is stored in the browser's `sessionStorage` and is cleared when you close the tab
